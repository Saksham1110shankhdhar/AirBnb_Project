<%- include('../partials/head') %>

<body class="min-h-screen bg-gradient-to-br from-blue-100 via-pink-100 to-yellow-100">

  <%- include('../partials/nav') %>

  <main class="max-w-4xl mx-auto px-6 py-12">

    <div class="bg-white rounded-3xl shadow-xl p-8">

      <!-- HEADER -->
      <div class="mb-8">
        <h1 class="text-3xl font-extrabold text-gray-900">
          <%= editing ? "✏️ Edit Your Home" : "➕ Add Your Home" %>
        </h1>
        <p class="text-gray-500 mt-1">
          <%= editing
            ? "Update your property details below"
            : "Fill in the details to list your property"
          %>
        </p>
      </div>

      <!-- FORM -->
      <form
        action="<%= editing ? '/host/edit-home' : '/host/add-home' %>"
        method="POST"
        enctype="multipart/form-data"
        class="space-y-6"
      >

        <!-- ✅ FIXED: HOME ID -->
        <% if (editing) { %>
          <input type="hidden" name="homeID" value="<%= home._id %>" />
        <% } %>

        <!-- HOUSE NAME -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">House Name</label>
          <input
            type="text"
            name="houseName"
            value="<%= editing ? home.houseName : '' %>"
            required
            class="w-full rounded-xl border border-gray-300 px-4 py-3
                   focus:ring-2 focus:ring-rose-300 focus:outline-none"
          />
        </div>

        <!-- PRICE -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">
            Price (₹ / night)
          </label>
          <input
            type="number"
            name="price"
            value="<%= editing ? home.price : '' %>"
            required
            class="w-full rounded-xl border border-gray-300 px-4 py-3
                   focus:ring-2 focus:ring-rose-300 focus:outline-none"
          />
        </div>

        <!-- LOCATION -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Location</label>
          <input
            type="text"
            name="location"
            value="<%= editing ? home.location : '' %>"
            required
            class="w-full rounded-xl border border-gray-300 px-4 py-3
                   focus:ring-2 focus:ring-rose-300 focus:outline-none"
          />
        </div>

        <!-- RATING -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Rating</label>
          <input
            type="number"
            step="0.1"
            max="5"
            name="rating"
            value="<%= editing ? home.rating : '' %>"
            class="w-full rounded-xl border border-gray-300 px-4 py-3
                   focus:ring-2 focus:ring-rose-300 focus:outline-none"
          />
        </div>

        <!-- IMAGE -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">
            Home Image
          </label>

          <% if (editing && home.photoUrl) { %>
            <img
              src="<%= home.photoUrl %>"
              alt="Home image"
              class="w-full h-48 object-cover rounded-xl mb-3"
            />
          <% } %>

          <input
            type="file"
            name="image"
            class="w-full rounded-xl border border-gray-300 px-4 py-2"
          />
        </div>

        <!-- DESCRIPTION -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">
            Description
          </label>
          <textarea
            name="description"
            rows="4"
            class="w-full rounded-xl border border-gray-300 px-4 py-3
                   focus:ring-2 focus:ring-rose-300 focus:outline-none"
          ><%= editing ? home.description : '' %></textarea>
        </div>

        <!-- ACTION BUTTON -->
        <button
          type="submit"
          class="w-full py-3 rounded-2xl
                 bg-gradient-to-r from-rose-500 to-orange-400
                 text-white font-bold shadow-lg
                 hover:brightness-110 transition"
        >
          <%= editing ? "Update Home" : "Add Home" %>
        </button>

      </form>

    </div>

  </main>

</body>
</html>
