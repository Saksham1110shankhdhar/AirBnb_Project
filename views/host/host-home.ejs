<%- include('../partials/head') %>

<body class="min-h-screen bg-gradient-to-br from-blue-100 via-pink-100 to-yellow-100">

  <%- include('../partials/nav') %>

  <main class="max-w-7xl mx-auto px-6 py-10">

    <!-- HEADER -->
    <div class="mb-10">
      <h1 class="text-4xl font-extrabold text-gray-900">
        ğŸ§‘â€ğŸ’¼ Host Dashboard
      </h1>
      <p class="text-gray-600 mt-2">
        Overview of your properties, pricing, and performance
      </p>
    </div>

    <!-- STATS CARDS -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">

      <div class="bg-white rounded-2xl shadow p-6">
        <p class="text-sm text-gray-500">Total Listings</p>
        <p class="text-3xl font-extrabold text-gray-900">
          <%= homes.length %>
        </p>
      </div>

      <div class="bg-white rounded-2xl shadow p-6">
        <p class="text-sm text-gray-500">Average Price</p>
        <p class="text-3xl font-extrabold text-green-600">
          â‚¹<%= homes.length ? Math.round(homes.reduce((s,h)=>s+h.price,0)/homes.length) : 0 %>
        </p>
      </div>

      <div class="bg-white rounded-2xl shadow p-6">
        <p class="text-sm text-gray-500">Average Rating</p>
        <p class="text-3xl font-extrabold text-yellow-500">
          <%= homes.length ? (homes.reduce((s,h)=>s+h.rating,0)/homes.length).toFixed(1) : "0.0" %> â­
        </p>
      </div>

      <div class="bg-gradient-to-r from-rose-500 to-orange-400 text-white rounded-2xl shadow p-6 flex flex-col justify-between">
        <p class="text-sm opacity-90">Quick Action</p>
        <a
          href="/host/add-home"
          class="mt-3 inline-flex items-center gap-2 font-bold"
        >
          â• Add New Home â†’
        </a>
      </div>

    </div>

    <!-- LISTINGS HEADER -->
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-2xl font-bold text-gray-900">
        ğŸ  Your Listings
      </h2>
      <a
        href="/host/host-homes"
        class="text-sm font-semibold text-rose-600 hover:underline"
      >
        Manage All â†’
      </a>
    </div>

    <!-- EMPTY STATE -->
    <% if (homes.length === 0) { %>
      <div class="bg-white rounded-2xl shadow p-10 text-center">
        <p class="text-lg font-semibold text-gray-700">
          You havenâ€™t listed any homes yet.
        </p>
        <a
          href="/host/add-home"
          class="inline-block mt-5 px-6 py-3 rounded-xl
                 bg-gradient-to-r from-rose-500 to-orange-400
                 text-white font-bold shadow hover:brightness-110"
        >
          â• Add Your First Home
        </a>
      </div>
    <% } %>

    <!-- HOMES GRID -->
    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
      <% homes.forEach(home => { %>

        <div class="bg-white rounded-2xl shadow hover:shadow-xl transition overflow-hidden">

          <img
            src="<%= home.photoUrl %>"
            alt="Home image"
            class="w-full h-48 object-cover"
          />

          <div class="p-5 space-y-3">

            <h3 class="text-xl font-bold text-gray-900">
              <%= home.houseName %>
            </h3>

            <div class="text-sm text-gray-600 space-y-1">
              <p>ğŸ“ <%= home.location %></p>
              <p>â­ <span class="font-semibold text-yellow-600"><%= home.rating %></span></p>
              <p>
                ğŸ’° <span class="font-bold text-green-600">â‚¹<%= home.price %></span>
                <span class="text-gray-500">/ night</span>
              </p>
            </div>

            <!-- ACTIONS -->
            <div class="pt-4 flex gap-3">
              <a
                href="/host/edit-home/<%= home._id %>?editing=true"
                class="flex-1 text-center py-2 rounded-xl border border-gray-200
                       font-semibold text-gray-800 hover:bg-gray-100 transition"
              >
                âœï¸ Edit
              </a>

              <form action="/host/delete-home/<%= home._id %>" method="POST" class="flex-1">
                <button
                  type="submit"
                  class="w-full py-2 rounded-xl
                         bg-gradient-to-r from-red-500 to-red-600
                         text-white font-semibold hover:brightness-110 transition"
                >
                  ğŸ—‘ Delete
                </button>
              </form>
            </div>

          </div>
        </div>

      <% }); %>
    </div>

  </main>

</body>
</html>

